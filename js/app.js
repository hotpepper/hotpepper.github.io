
var model = {
	"work" : {
		"jobs": [
		{
			"employer": "New York City Department of Transportation",
			"title": "City Planner",
			"location":"New York",
			"dates":"8/1/2009 - Present",
			"description" : "Play with data on maps, in databases, and in code"
		},
		{
			"employer": "New York City Department of City Planning",
			"title": "City Planner",
			"location":"New York",
			"dates":"1/1/2007 - 7/31/2009",
			"description" : "Play with data on maps, in databases, and in code"
		}
		]
	},
	projects:{
		"project": [
		{
			"pjctID": "project3",
			"label": "Targeting Bicycle Programs",
			"img": "images/workFlowsImg.PNG",
			"about": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla accumsan et dolor quis volutpat. Etiam condimentum elementum enim, non pharetra elit interdum sit amet. Aenean lorem nulla, dignissim eu tortor sed, convallis mattis purus.",
			"data": "Nam accumsan ut diam in tempus. Sed imperdiet dignissim ornare. Donec mattis est id magna dictum gravida. Nunc faucibus, ante nec ultrices fermentum, sapien sapien accumsan sem",
			"code": "Aliquam erat volutpat. Proin eget volutpat metus, feugiat hendrerit purus. Aliquam magna nulla, condimentum id porttitor vitae, pellentesque et erat."
		},
		{
			"pjctID": "project1",
			"label": "Sample Vision Zero Map",
			"img": "images/vzImg.PNG",
			"about": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla accumsan et dolor quis volutpat. Etiam condimentum elementum enim, non pharetra elit interdum sit amet. Aenean lorem nulla, dignissim eu tortor sed, convallis mattis purus. Sed vehicula turpis sit amet mauris auctor, tempor elementum quam tempus. ",
			"data": "Nam accumsan ut diam in tempus. Sed imperdiet dignissim ornare. Donec mattis est id magna dictum gravida. Nunc faucibus, ante nec ultrices fermentum, sapien sapien accumsan sem",
			"code": "Aliquam erat volutpat. Proin eget volutpat metus, feugiat hendrerit purus. Aliquam magna nulla, condimentum id porttitor vitae, pellentesque et erat.",
			"link": ["http://www.nyc.gov/html/dot/html/pedestrians/ped-safety-action-plan.shtml"],
			"linkTxt": ["Full Report"]
		},
		{
			"pjctID": "project2",
			"label": "Speed Camera Program Crash Analysis",
			"img": "images/camerasImg.PNG",
			"about": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla accumsan et dolor quis volutpat. Etiam condimentum elementum enim, non pharetra elit interdum sit amet. Aenean lorem nulla, dignissim eu tortor sed, convallis mattis purus. Sed vehicula turpis sit amet mauris auctor, tempor elementum quam tempus. ",
			"data": "Nam accumsan ut diam in tempus. Sed imperdiet dignissim ornare. Donec mattis est id magna dictum gravida. Nunc faucibus, ante nec ultrices fermentum, sapien sapien accumsan sem",
			"code": "Aliquam erat volutpat. Proin eget volutpat metus, feugiat hendrerit purus. Aliquam magna nulla, condimentum id porttitor vitae, pellentesque et erat."
		},
		{
			"pjctID": "project4",
			"label": "Community Engagement",
			"img": "images/bivariateImg.PNG",
			"about": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla accumsan et dolor quis volutpat. Etiam condimentum elementum enim, non pharetra elit interdum sit amet. Aenean lorem nulla, dignissim eu tortor sed, convallis mattis purus. Sed vehicula turpis sit amet mauris auctor, tempor elementum quam tempus. ",
			"data": "Nam accumsan ut diam in tempus. Sed imperdiet dignissim ornare. Donec mattis est id magna dictum gravida. Nunc faucibus, ante nec ultrices fermentum, sapien sapien accumsan sem",
			"code": "Aliquam erat volutpat. Proin eget volutpat metus, feugiat hendrerit purus. Aliquam magna nulla, condimentum id porttitor vitae, pellentesque et erat.",
			"link": ["http://www.nyc.gov/html/visionzero/pages/maps-and-data/vz-input-map.shtml"],
			"linkTxt": ["Vision Zero Input"]
		},
		{
			"pjctID": "project5",
			"label": "Bike Share Opportunities",
			"img": "images/bikeshareImg.PNG",
			"about": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla accumsan et dolor quis volutpat. Etiam condimentum elementum enim, non pharetra elit interdum sit amet. Aenean lorem nulla, dignissim eu tortor sed, convallis mattis purus. Sed vehicula turpis sit amet mauris auctor, tempor elementum quam tempus. ",
			"data": "Nam accumsan ut diam in tempus. Sed imperdiet dignissim ornare. Donec mattis est id magna dictum gravida. Nunc faucibus, ante nec ultrices fermentum, sapien sapien accumsan sem",
			"code": "Aliquam erat volutpat. Proin eget volutpat metus, feugiat hendrerit purus. Aliquam magna nulla, condimentum id porttitor vitae, pellentesque et erat.",
			"link": ["https://www.citibikenyc.com", "http://www.nyc.gov/html/dcp/pdf/transportation/bike_share_complete.pdf"],
			"linkTxt": ["CitiBike", "Study"]
		},
		{
			"pjctID": "project6",
			"label": "Vision Zero View Web Map",
			"img": "images/vzvImg.PNG",
			"about": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla accumsan et dolor quis volutpat. Etiam condimentum elementum enim, non pharetra elit interdum sit amet. Aenean lorem nulla, dignissim eu tortor sed, convallis mattis purus. Sed vehicula turpis sit amet mauris auctor, tempor elementum quam tempus. ",
			"data": "Nam accumsan ut diam in tempus. Sed imperdiet dignissim ornare. Donec mattis est id magna dictum gravida. Nunc faucibus, ante nec ultrices fermentum, sapien sapien accumsan sem",
			"code": "Aliquam erat volutpat. Proin eget volutpat metus, feugiat hendrerit purus. Aliquam magna nulla, condimentum id porttitor vitae, pellentesque et erat.",
			"link": ["http://www.vzv.nyc","https://github.com/hotpepper/ALIS_Network_Simplify"],
			"linkTxt": ["Vision Zero View", "Intersection Simplification Code"]
		}
		]
	},
	education:{
		"schools": [
		{
			"name": "Columbia University",
			"location": "New York, NY",
			"degree": "Master of Science",
			"majors": "Urban Planning",
			"minors": ["Transportation"],
			"dates": "2005 - 2007",
			"url": "http://www.columbia.edu/"
     	},
     	{
     		"name": "SUNY Buffalo",
     		"location": "Buffalo, NY",
     		"degree": "Bachlor of Arts",
     		"majors": "Urban Planning",
     		"minors": ["Spanish","Japanese"],
     		"dates": "2000 - 2004",
     		"url": "http://www.buffalo.edu/"
     	}
     	],
     	"onlineCourses":
     	[
     	{
	     	"title": "JavaScript Design Patterns",
	        "school": "Udacity",
	        "date": 2015,
	        "url": "https://www.udacity.com/course/ud989"
	     },
	      {
	     	"title": "Intro to AJAX",
	        "school": "Udacity",
	        "date": 2015,
	        "url": "https://www.udacity.com/course/ud110"
	     },
	     {
	     	"title": "Intro to jQuery",
	        "school": "Udacity",
	        "date": 2015,
	        "url": "https://www.udacity.com/course/ud245"
	     },
	     {
	     	"title": "JavaScript Basics",
	        "school": "Udacity",
	        "date": 2015,
	        "url": "https://www.udacity.com/course/ud804"
	     },
	     {
	     	"title": "HTML5 Canvas",
	        "school": "Udacity",
	        "date": 2015,
	        "url": "https://www.udacity.com/course/ud292"
	     },
	     {
	     	"title": "Intro to HTML and CSS",
	        "school": "Udacity",
	        "date": 2015,
	        "url": "https://www.udacity.com/course/ud304"
	     },
	     {
	     	"title": "Programming Foundations with Python",
	        "school": "Udacity",
	        "date": 2015,
	        "url": "https://www.udacity.com/course/ud036"
	     },
	    {
	     	"title": "Intro to Hadoop and MapReduce",
	        "school": "Udacity",
	        "date": 2014,
	        "url": "https://www.udacity.com/course/ud617"
	     },
	     {
	     	"title": "Intro to Algorithms",
	        "school": "Udacity",
	        "date": 2013,
	        "url": "https://www.udacity.com/course/cs215"
	     },
	      {
	     	"title": "Intro to Computer Science",
	        "school": "Udacity",
	        "date": 2013,
	        "url": "https://www.udacity.com/course/cs101"
	     },
	     {
	     	"title": "Maps and the Geospatial Revolution",
	     	"school": "Corsera",
	     	"date": 0,
	     	"url": "https://www.coursera.org/course/maps"
	     },
	     {
	     	"title": "Writing Queries Using Microsoft SQL Server 2008 Transact-SQL",
	     	"school": "Microsoft Learning",
	     	"date": 0,
	     	"url": "https://www.microsoft.com/learning/en-us/course.aspx?id=2778a"
	     },
	     {
	     	"title": "Implementing a Microsoft SQL Server 2008 R2 Database ",
	     	"school": "Microsoft Learning",
	     	"date": 0,
	     	"url": "https://www.microsoft.com/learning/en-us/course.aspx?id=6232b"
	     }
	     ]
    //"display": function taking no 
	}
};


var controller = {
	workLength: function(){
		return	model.work.jobs.length;
	},
	formatWork: function(job){
		console.log("adding job: "+ model.work.jobs[job].employer)
		return HTMLworkEmployer.replace("%data%", model.work.jobs[job].employer) +
			HTMLworkTitle.replace("%data%", model.work.jobs[job].title)+
			HTMLworkLocation.replace("%data%", model.work.jobs[job].location)+
			HTMLworkDates.replace("%data%", model.work.jobs[job].dates)+
			HTMLworkDescription.replace("%data%", model.work.jobs[job].description)
	},
	schoolLength: function(){
		return	model.education.schools.length;
	},
	formatSchool: function(school){
		console.log("adding school: "+  model.education.schools[school].name)
		return HTMLschoolName.replace("%data%", model.education.schools[school].name) +
			HTMLschoolDegree.replace("%data%", model.education.schools[school].degree)+
			HTMLschoolDates.replace("%data%", model.education.schools[school].dates)+
			HTMLschoolLocation.replace("%data%", model.education.schools[school].location)+
			HTMLschoolMajor.replace("%data%", model.education.schools[school].majors)+
			HTMLschoolMinor.replace("%data%", model.education.schools[school].minors)
	},

	onlineLength: function(){
		return	model.education.onlineCourses.length;
	},
	formatOnline: function(c){
		console.log("adding class: "+  model.education.onlineCourses[c].name)
		if (this.onlineLength()-1 ==c ) {
			return HTMLonlineTitle.replace("%data%", model.education.onlineCourses[c].title).replace("#", model.education.onlineCourses[c].url)	
		} else {
			return HTMLonlineTitle.replace("%data%", model.education.onlineCourses[c].title).replace("#", model.education.onlineCourses[c].url)
			+" | "
		}
		//HTMLonlineSchool.replace("%data%", model.education.onlineCourses[c].school)
			//HTMLonlineDates.replace("%data%","-")
			//+HTMLonlineURL.replace("%data%", model.education.onlineCourses[c].url)
	},
	projectLenght: function(){
		return model.projects.project.length
	},
	linkLength: function(p) {
		return model.projects.project[p].link.length
	},
	formatProject: function(p){
		//add new code for Modals here
		var output =  HTMLmodalPjct.replace("%data%", model.projects.project[p].pjctID)+
		HTMLmodalLbl.replace("%data%", model.projects.project[p].label)+
		HTMLmodalImg.replace("%data%", model.projects.project[p].img)+
		HTMLmodalAbt.replace("%data%", model.projects.project[p].about)+
		HTMLmodalDta.replace("%data%", model.projects.project[p].data)+
		HTMLmodalCde.replace("%data%", model.projects.project[p].code)
		//check for link
		if (model.projects.project[p].link){
			//get all links
			console.log(this.linkLength(p))
			for (linkout=0;linkout<this.linkLength(p); linkout++) {
				console.log("out")
				output = output + HTMLmodalLnk.replace("%data%", model.projects.project[p].link[linkout])+
				HTMLmodalLnkTxt.replace("%data%", model.projects.project[p].linkTxt[linkout])+"<br>"
			}
		};
		return output+HTMLmodalEnd
	}
};

var view = {
	showWork: function(){
		for (i = 0; i < controller.workLength(); i++){
			$("#workExperience").append(HTMLworkStart );
			$(".work-entry:last").append(controller.formatWork(i))
		}
		
	},
	showSchool: function(){
		for (i=0;i<controller.schoolLength();i++){
			$("#education").append(HTMLschoolStart );
			$(".education-entry:last").append(controller.formatSchool(i))
		}
	},
	showOnline: function(){
		$(".education-entry:last").append(HTMLonlineClasses)
		for (i=0; i<controller.onlineLength();i++){
			$(".education-entry:last").append(controller.formatOnline(i))
		}
	},
	showProjectModals: function(){
		for (i=0; i<controller.projectLenght(); i++) {
			$("body").append(controller.formatProject(i))
		}
	},
	render: function(){
		this.showWork();
		this.showSchool();
		this.showOnline();
		this.showProjectModals();
	}
};

view.render();
